---
import AuthLayout from "../layouts/AuthLayout.astro";
import { ForgotPasswordForm } from "../components/auth";

// Get query params for error messages
const errorParam = Astro.url.searchParams.get("error");

// Map error codes to user-friendly messages
const errorMessages: Record<string, string> = {
  invalid_email: "Please provide a valid email address.",
  rate_limit: "Too many requests. Please try again later.",
};

const errorMessage = errorParam ? errorMessages[errorParam] || "An error occurred. Please try again." : null;
---

<AuthLayout title="Reset Password - 10xCards">
  {
    errorMessage && (
      <div class="mb-4 bg-destructive/10 border border-destructive text-destructive px-4 py-3 rounded-md text-sm">
        <p>{errorMessage}</p>
      </div>
    )
  }
  <ForgotPasswordForm client:load />
</AuthLayout>
